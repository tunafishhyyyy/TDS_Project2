
Robustly set column names from the first row if needed. - 
Ensure the GDP column is selected for analysis 
(not 'World' or other summary/header values).
Use the correct country column for ranking. - 

These are not the final questions I be evaluated on. These examples are indicative. 
so data scraping needs to be generic and prompts as well.

Make the changes that are generic  The scraping logic and prompts should work for any table, not just GDP-specific ones.


===
api output : 
                            
{
  "workflow_type": "multi_step_web_scraping",
  "status": "completed",
  "timestamp": "2025-08-05T11:22:17.738890",
  "target_url": "https://en.wikipedia.org/wiki/List_of_countries_by_GDP_(nominal)",
  "execution_log": [
    "✓ Table scraping completed",
    "✓ Table inspection completed",
    "✓ Data cleaning completed",
    "✓ Data analysis completed",
    "✓ Visualization completed",
    "✓ Question answering completed"
  ],
  "results": {
    "rank_5": "Not enough data",
    "total_top_n": 0,
    "top_n_list": []
  },
  "plot_path": null,
  "message": "Workflow completed using step-based approach",
  "fallback_mode": true
}



Server logs :
=======
2025-08-05 11:22:17,263 - main - INFO - Starting synchronous task 532dad68-587a-47f5-9688-76069093cbb9
2025-08-05 11:22:17,263 - main - INFO - Processed questions.txt with 363 characters
2025-08-05 11:22:17,263 - main - INFO - Detecting workflow type for task: Instruction to Agent:
Scrape the table from this Wikipedia page:
https://en.wikipedia.org/wiki/Lis...
2025-08-05 11:22:17,263 - main - WARNING - LLM not available, using fallback workflow detection
2025-08-05 11:22:17,263 - main - INFO - Detected workflow: multi_step_web_scraping
2025-08-05 11:22:17,263 - main - INFO - Task description: Instruction to Agent:
Scrape the table from this Wikipedia page:
https://en.wikipedia.org/wiki/List_of_countries_by_GDP_(nominal)
Then:
Clean the data — remove footnote references and extra symbol...
2025-08-05 11:22:17,263 - main - INFO - Workflow input prepared with 7 keys
2025-08-05 11:22:17,263 - main - INFO - Additional files: []
2025-08-05 11:22:17,263 - main - INFO - Processing task 532dad68-587a-47f5-9688-76069093cbb9 synchronously with workflow: multi_step_web_scraping
2025-08-05 11:22:17,263 - main - INFO - Starting workflow execution for multi_step_web_scraping
2025-08-05 11:22:17,264 - main - INFO - Executing workflow multi_step_web_scraping with orchestrator
2025-08-05 11:22:17,264 - main - INFO - Available workflows: ['multi_step_web_scraping']
2025-08-05 11:22:17,264 - chains.workflows - INFO - Executing ModularWebScrapingWorkflow (fallback mode)
2025-08-05 11:22:17,739 - main - INFO - Workflow multi_step_web_scraping executed successfully for task 532dad68-587a-47f5-9688-76069093cbb9
2025-08-05 11:22:17,739 - main - INFO - Result type: <class 'dict'>
2025-08-05 11:22:17,739 - main - INFO - Result keys: ['workflow_type', 'status', 'timestamp', 'target_url', 'execution_log', 'results', 'plot_path', 'message', 'fallback_mode']
2025-08-05 11:22:17,739 - main - INFO - Task 532dad68-587a-47f5-9688-76069093cbb9 completed successfully
2025-08-05 11:22:17,739 - main - INFO - Result keys: ['workflow_type', 'status', 'timestamp', 'target_url', 'execution_log', 'results', 'plot_path', 'message', 'fallback_mode']
Found 7 tables on the page

Table 0:
  Shape: (1, 1)
  Columns: [0]
  Sample data:
                                                   0
0  Largest economies in the world by GDP (nominal...

Table 1:
  Shape: (1, 3)
  Columns: [0, 1, 2]
  Sample data:
                                                   0  ...                                                  2
0  > $20 trillion $10–20 trillion $5–10 trillion ...  ...  $50–100 billion $25–50 billion $5–25 billion <...

[1 rows x 3 columns]

Table 2:
  Shape: (222, 7)
  Columns: [('Country/Territory', 'Country/Territory'), ('IMF[1][12]', 'Forecast'), ('IMF[1][12]', 'Year'), ('World Bank[13]', 'Estimate'), ('World Bank[13]', 'Year'), ('United Nations[14]', 'Estimate'), ('United Nations[14]', 'Year')]
  Sample data:
  Country/Territory IMF[1][12]  ... United Nations[14]           
  Country/Territory   Forecast  ...           Estimate       Year
0             World  113795678  ...          100834796       2022
1     United States   30507217  ...           27720700       2023
2             China   19231705  ...           17794782  [n 1]2023

[3 rows x 7 columns]

Table 3:
  Shape: (8, 2)
  Columns: ['vteLists of countries by financial rankings', 'vteLists of countries by financial rankings.1']
  Sample data:
  vteLists of countries by financial rankings      vteLists of countries by financial rankings.1
0                                       Trade  Account balance Exports by product merchandise...
1                                  Investment                   FDI received past FDI abroad GFI
2                                       Funds  Forex reserves Gold reserves Sovereign wealth ...

Table 4:
  Shape: (8, 2)
  Columns: ['vteLists of countries by GDP rankings', 'vteLists of countries by GDP rankings.1']
  Sample data:
  vteLists of countries by GDP rankings            vteLists of countries by GDP rankings.1
0                               Nominal  GDP (nominal) Past and projected Sector compos...
1         Purchasing power parity (PPP)  GDP (PPP) Past Past and projected Ten largest ...
2                            Per capita  nominal GDP Past and projected GDP (PPP) by re...

Table 5:
  Shape: (13, 2)
  Columns: ['vteEconomic classification of countries', 'vteEconomic classification of countries.1']
  Sample data:
             vteEconomic classification of countries          vteEconomic classification of countries.1
0  Developed country Developing country Heavily i...  Developed country Developing country Heavily i...
1                             Three/Four-World Model  First World Second World Third World Fourth World
2                       Gross domestic product (GDP)  Nominal By country past and projected per capi...

Table 6:
  Shape: (2, 2)
  Columns: [0, 1]
  Sample data:
                               0                                                  1
0                        Nominal  By country past and projected per capita per c...
1  Purchasing power parity (PPP)  By country future estimates per capita per cap...
Selected table 2 with 222 rows and 7 columns

Selected data shape: (222, 7)
Columns: [('Country/Territory', 'Country/Territory'), ('IMF[1][12]', 'Forecast'), ('IMF[1][12]', 'Year'), ('World Bank[13]', 'Estimate'), ('World Bank[13]', 'Year'), ('United Nations[14]', 'Estimate'), ('United Nations[14]', 'Year')]

First few rows:
  Country/Territory IMF[1][12]  ... United Nations[14]           
  Country/Territory   Forecast  ...           Estimate       Year
0             World  113795678  ...          100834796       2022
1     United States   30507217  ...           27720700       2023
2             China   19231705  ...           17794782  [n 1]2023
3           Germany    4744804  ...            4525704       2023
4             India    4187017  ...            3575778       2023

[5 rows x 7 columns]

Flattened MultiIndex columns:
Columns: ['Country/Territory', 'Forecast', 'Year', 'Estimate', 'Year', 'Estimate', 'Year']

After setting headers:
Columns: ['World', '113795678', '2025', '111326370', '2024', '100834796', '2022']

After cleaning:
0  World   113795678     2025   111326370     2024   100834796     2022
0    NaN  30507217.0   2025.0  29184890.0   2024.0  27720700.0   2023.0
1    NaN  19231705.0  12025.0  18743803.0  32024.0  17794782.0  12023.0
2    NaN   4744804.0   2025.0   4659929.0   2024.0   4525704.0   2023.0
3    NaN   4187017.0   2025.0   3912686.0   2024.0   3575778.0   2023.0
4    NaN   4186431.0   2025.0   4026211.0   2024.0   4204495.0   2023.0

Numeric columns available: ['World', '113795678', '2025', '111326370', '2024', '100834796', '2022']
Using column 'World' for analysis

Top 10 by World:
Empty DataFrame
Columns: [World, World]
Index: []
No data to plot.

ANSWERS:
{'rank_5': 'Not enough data', 'total_top_n': 0, 'top_n_list': []}
INFO:     49.43.242.12:62664 - "POST /api/ HTTP/1.1" 200 OK

== Notes ==
Pls do not run the commands on this machine as it is not set up for this project, I am using cloud VM for the project delplyment and testing.
no need to create test scripts unless its mentioned in the context 
no need to create Instruction md files unless its mentioned in the context
These are not the final questions I be evaluated on. These examples are indicative. 
so data scraping needs to be generic and prompts as well. Make data scraping generic and prompts generic. The scraping logic and prompts 
should work for any table, not just any one use case.


